<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Dr.ギガの科学者的タロット解析ログ</title>

<style>
/* ============================
   全体
============================ */
body {
  margin: 0;
  padding: 0;
  background-color: #0a0e2f;
  color: #ffffff;
  text-align: center;
  font-family: sans-serif;
}

/* ============================
   文字非表示
============================ */
#title, #cardText {
  display: none;
}

/* ============================
   画像共通
============================ */
img {
  display: block;
  margin: 20px auto;
}

/* カード（結果用・縦長） */
img.card {
  width: 360px;  /* カードは固定 */
  height: auto;
}

/* 権利画像・表紙・説明・結果・エンディング画像 */
img.description {
  width: 98%;        /* 画面幅いっぱいに近く */
  max-width: 1200px; /* 最大幅を広く */
  height: auto;
}

/* 逆位置 */
.reversed {
  transform: rotate(180deg);
}

/* ボタン */
button {
  margin: 20px auto 40px;
  padding: 12px 28px;
  font-size: 16px;
  cursor: pointer;
}

/* ============================
   スプラッシュ画面
============================ */
#splash-screen {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background-color: #0a0e2f;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  z-index: 9999;
}

#splash-screen img {
  width: 98%;
  max-width: 1200px;
  height: auto;
}

#splash-screen button {
  margin-top: 20px;
  padding: 12px 28px;
  font-size: 16px;
  cursor: pointer;
}
</style>
</head>

<body>

<!-- BGM -->
<audio id="bgm" src="music/アンドロイドの涙.mp3" loop></audio>

<!-- スプラッシュ画面 -->
<div id="splash-screen">
  <img src="images/splash.png" alt="権利表記">
  <button id="start-button">プログラム開始</button>
</div>

<!-- ゲーム本体 -->
<h1 id="title">Dr.ギガ</h1>

<img id="cardImage" class="description" src="images/title.png" alt="tarot">
<p id="cardText">プログラム実行する</p>

<button id="nextButton" style="display:none;">プログラム実行する</button>

<script>
console.log("tarot script loaded");

/* ============================
   スプラッシュ画面制御
============================ */
const splashScreen = document.getElementById("splash-screen");
const startButton = document.getElementById("start-button");
const nextButton = document.getElementById("nextButton");
const bgm = document.getElementById("bgm");

startButton.addEventListener("click", () => {
  splashScreen.style.display = "none";
  nextButton.style.display = "block"; // 占うボタン表示
  bgm.play(); // BGM再生
});

/* ============================
   DOM取得
============================ */
const title = document.getElementById("title");
const cardImage = document.getElementById("cardImage");
const cardText = document.getElementById("cardText");

/* ============================
   タロットカード
============================ */
const tarotCards = [
  {
    name: "愚者",
    cardImage: "images/card/00_fool.png",
    description: {
      upright: [
        "images/description/00_fool_up_1.png",
        "images/description/00_fool_up_2.png"
      ],
      reversed: [
        "images/description/00_fool_rev_1.png",
        "images/description/00_fool_rev_2.png"
      ]
    }
  },
  {
    name: "魔術師",
    cardImage: "images/card/01_magician.png",
    description: {
      upright: [
        "images/description/01_magician_up_1.png",
        "images/description/01_magician_up_2.png"
      ],
      reversed: [
        "images/description/01_magician_rev_1.png",
        "images/description/01_magician_rev_2.png"
      ]
    }
  },
  {
    name: "女教皇",
    cardImage: "images/card/02_high_priestess.png",
    description: {
      upright: [
        "images/description/02_high_priestess_up_1.png",
        "images/description/02_high_priestess_up_2.png"
      ],
      reversed: [
        "images/description/02_high_priestess_rev_1.png",
        "images/description/02_high_priestess_rev_2.png"
      ]
    }
  },
  {
    name: "女帝",
    cardImage: "images/card/03_empress.png",
    description: {
      upright: [
        "images/description/03_empress_up_1.png",
        "images/description/03_empress_up_2.png"
      ],
      reversed: [
        "images/description/03_empress_rev_1.png",
        "images/description/03_empress_rev_2.png"
      ]
    }
  },
  {
    name: "皇帝",
    cardImage: "images/card/04_emperor.png",
    description: {
      upright: [
        "images/description/04_emperor_up_1.png",
        "images/description/04_emperor_up_2.png"
      ],
      reversed: [
        "images/description/04_emperor_rev_1.png",
        "images/description/04_emperor_rev_2.png"
      ]
    }
  },
  {
    name: "法王",
    cardImage: "images/card/05_hierophant.png",
    description: {
      upright: [
        "images/description/05_hierophant_up_1.png",
        "images/description/05_hierophant_up_2.png"
      ],
      reversed: [
        "images/description/05_hierophant_rev_1.png",
        "images/description/05_hierophant_rev_2.png"
      ]
    }
},
{
  name: "恋人",
  cardImage: "images/card/06_lovers.png",
  description: {
    upright: [
      "images/description/06_lovers_up_1.png",
      "images/description/06_lovers_up_2.png"
    ],
    reversed: [
      "images/description/06_lovers_rev_1.png",
      "images/description/06_lovers_rev_2.png"
    ]
  }
},
{
  name: "戦車",
  cardImage: "images/card/07_chariot.png",
  description: {
    upright: [
      "images/description/07_chariot_up_1.png",
      "images/description/07_chariot_up_2.png"
    ],
    reversed: [
      "images/description/07_chariot_rev_1.png",
      "images/description/07_chariot_rev_2.png"
    ]
  }
},
{
  name: "力",
  cardImage: "images/card/08_strength.png",
  description: {
    upright: [
      "images/description/08_strength_up_1.png",
      "images/description/08_strength_up_2.png"
    ],
    reversed: [
      "images/description/08_strength_rev_1.png",
      "images/description/08_strength_rev_2.png"
    ]
  }
},
{
  name: "隠者",
  cardImage: "images/card/09_hermit.png",
  description: {
    upright: [
      "images/description/09_hermit_up_1.png",
      "images/description/09_hermit_up_2.png"
    ],
    reversed: [
      "images/description/09_hermit_rev_1.png",
      "images/description/09_hermit_rev_2.png"
    ]
  }
},
{
  name: "運命の輪",
  cardImage: "images/card/10_wheel.png",
  description: {
    upright: [
      "images/description/10_wheel_up_1.png",
      "images/description/10_wheel_up_2.png"
    ],
    reversed: [
      "images/description/10_wheel_rev_1.png",
      "images/description/10_wheel_rev_2.png"
    ]
  }
},
{
  name: "正義",
  cardImage: "images/card/11_justice.png",
  description: {
    upright: [
      "images/description/11_justice_up_1.png",
      "images/description/11_justice_up_2.png"
    ],
    reversed: [
      "images/description/11_justice_rev_1.png",
      "images/description/11_justice_rev_2.png"
    ]
  }
},
{
  name: "吊るされた男",
  cardImage: "images/card/12_hanged_man.png",
  description: {
    upright: [
      "images/description/12_hanged_man_up_1.png",
      "images/description/12_hanged_man_up_2.png"
    ],
    reversed: [
      "images/description/12_hanged_man_rev_1.png",
      "images/description/12_hanged_man_rev_2.png"
    ]
  }
},
{
  name: "死神",
  cardImage: "images/card/13_death.png",
  description: {
    upright: [
      "images/description/13_death_up_1.png",
      "images/description/13_death_up_2.png"
    ],
    reversed: [
      "images/description/13_death_rev_1.png",
      "images/description/13_death_rev_2.png"
    ]
  }
},
{
  name: "節制",
  cardImage: "images/card/14_temperance.png",
  description: {
    upright: [
      "images/description/14_temperance_up_1.png",
      "images/description/14_temperance_up_2.png"
    ],
    reversed: [
      "images/description/14_temperance_rev_1.png",
      "images/description/14_temperance_rev_2.png"
    ]
  }
},
{
  name: "悪魔",
  cardImage: "images/card/15_devil.png",
  description: {
    upright: [
      "images/description/15_devil_up_1.png",
      "images/description/15_devil_up_2.png"
    ],
    reversed: [
      "images/description/15_devil_rev_1.png",
      "images/description/15_devil_rev_2.png"
    ]
  }
},
{
  name: "塔",
  cardImage: "images/card/16_tower.png",
  description: {
    upright: [
      "images/description/16_tower_up_1.png",
      "images/description/16_tower_up_2.png"
    ],
    reversed: [
      "images/description/16_tower_rev_1.png",
      "images/description/16_tower_rev_2.png"
    ]
  }
},
{
  name: "星",
  cardImage: "images/card/17_star.png",
  description: {
    upright: [
      "images/description/17_star_up_1.png",
      "images/description/17_star_up_2.png"
    ],
    reversed: [
      "images/description/17_star_rev_1.png",
      "images/description/17_star_rev_2.png"
    ]
  }
},
{
  name: "月",
  cardImage: "images/card/18_moon.png",
  description: {
    upright: [
      "images/description/18_moon_up_1.png",
      "images/description/18_moon_up_2.png"
    ],
    reversed: [
      "images/description/18_moon_rev_1.png",
      "images/description/18_moon_rev_2.png"
    ]
  }
},
{
  name: "太陽",
  cardImage: "images/card/19_sun.png",
  description: {
    upright: [
      "images/description/19_sun_up_1.png",
      "images/description/19_sun_up_2.png"
    ],
    reversed: [
      "images/description/19_sun_rev_1.png",
      "images/description/19_sun_rev_2.png"
    ]
  }
},
{
  name: "審判",
  cardImage: "images/card/20_judgement.png",
  description: {
    upright: [
      "images/description/20_judgement_up_1.png",
      "images/description/20_judgement_up_2.png"
    ],
    reversed: [
      "images/description/20_judgement_rev_1.png",
      "images/description/20_judgement_rev_2.png"
    ]
  }
},
{
  name: "世界",
  cardImage: "images/card/21_world.png",
  description: {
    upright: [
      "images/description/21_world_up_1.png",
      "images/description/21_world_up_2.png"
    ],
    reversed: [
      "images/description/21_world_rev_1.png",
      "images/description/21_world_rev_2.png"
    ]
  }
}
];

/* ============================
   エンディング画像
============================ */
const endingImages = [
  "images/ending/end_1.png",
  "images/ending/end_2.png",
  "images/ending/end_3.png"
];

/* ============================
   状態管理
============================ */
let phase = "cover";
let currentCard = null;
let isReversed = false;

/* ============================
   初期表示
============================ */
resetToCover();

/* ============================
   ボタン制御
============================ */
nextButton.addEventListener("click", () => {
  if (phase === "cover") drawCard();
  else if (phase === "card") showDescription(0);
  else if (phase === "desc1") showDescription(1);
  else if (phase === "desc2") showEnding();
  else if (phase === "ending") resetToCover();
});

/* ============================
   表紙
============================ */
function resetToCover() {
  phase = "cover";
  cardImage.src = "images/title.png";
  cardImage.className = "description"; // 横長画像は大きく表示
  nextButton.textContent = "プログラムを実行する";      // ボタンも最初に戻す
}

/* ============================
   カードを引く
============================ */
function drawCard() {
  currentCard = tarotCards[Math.floor(Math.random() * tarotCards.length)];
  isReversed = Math.random() < 0.5;

  phase = "card";
  cardImage.src = currentCard.cardImage;
  cardImage.className = "card"; // カードは固定サイズ
  cardImage.classList.toggle("reversed", isReversed);

  nextButton.textContent = "次へ";
}

/* ============================
   説明画像①②
============================ */
function showDescription(index) {
  phase = index === 0 ? "desc1" : "desc2";

  const list = isReversed
    ? currentCard.description.reversed
    : currentCard.description.upright;

  cardImage.src = list[index];
  cardImage.className = "description"; // 横長画像は大きく表示

  nextButton.textContent = "次へ";
}

/* ============================
   エンディング
============================ */
function showEnding() {
  phase = "ending";

  cardImage.src =
    endingImages[Math.floor(Math.random() * endingImages.length)];
  cardImage.className = "description"; // 横長画像は大きく表示

  nextButton.textContent = "最初に戻る";
}
</script>

</body>
</html>
